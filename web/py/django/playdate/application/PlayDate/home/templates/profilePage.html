{% include "header.html" %}
{% load static %}

<head>
  <meta charset="UTF-8" />
  <title>Your Profile</title>

  <link rel="stylesheet" href="{% static 'css/profile.css' %}">
  </link>
  <script src="{% static 'js/profile.js' %}" defer="true"></script>
</head>

<body>
  {% block content %}
  {% if user.is_authenticated %}
  {% load static %}
  {% include "registered_navbar.html" %}
  {% else %}
  {% load static %}
  {% include "general_navbar.html" %}
  {% endif %}
  {% endblock %}
  <script>
    loadVals = {
      user: {
        id: "{{user.id}}",
        username: "{{user.username}}",
        email: "{{user.email}}",
        firstName: "{{user.first_name}}",
        lastName: "{{user.last_name}}",
        dateJoined: "{{user.date_joined}}",
        lastLogin: "{{user.last_login}}"
      },
      profile: {
        id: "{{profile.profileID}}",
        description: "{{profile.profileDesc}}",
        address: {
          id: "{{profile.address.address_id}}",
          street: "{{profile.address.street}}",
          city: "{{profile.address.city}}",
          state: "{{profile.address.state}}",
          zipCode: "{{profile.address.zipcode}}",
          country: "{{profile.address.country}}"
        }
      },
      dependents: [
        {% for dependent in dependents %} {
        id: "{{dependent.dependent_id}}",
        name: "{{dependent.name}}",
        dob: "{{dependent.dob.isoformat}}",
        interests: "{{dependent.interests}}"
        } {% if not forloop.last %}, {% endif %} {% endfor %}
      ],
      csrf: { token: '{% csrf_token %}'},
      dpdtURL: '{% url "dependents" %}',
      homeURL: '{$ url "home" %}'
  };
  </script>

  <div class="container mt-5 pt-2">
    <div class="main-body">
      <div class="row gutters-sm">
        <div class="col-md-4 col-sm-12 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle"
                  width="150">
                <div class="mt-3">
                  <h4>{{user.username}}</h4>

                  <p class="text-muted font-size-sm">User since {{user.date_joined}}<br>Last logged in on
                    {{user.last_login}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8 col-sm-12">
          <div class="card mb-3">
            <div class="card-body">
              <div class="row">
                <div class="col-xl-8">

                  <!-- Account details card-->
                  <div class="card mb-4">
                    <div class="card-header">Account Details</div>
                    <div class="card-body">
                      <form class="accountDetails" name="accountDetails" method="POST" action="">
                        {% csrf_token %}

                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                          <!-- Form Group (first name)-->
                          <div class="col-md-6">
                            <label class="small mb-1" for="inputFirstName">First name</label>
                            <input class="form-control" id="inputFirstName" type="text" name="inputFirstName"
                              placeholder="Enter your first name" value="{{user.first_name}}">
                          </div>
                          <!-- Form Group (last name)-->
                          <div class="col-md-6">
                            <label class="small mb-1" for="inputLastName">Last name</label>
                            <input class="form-control" id="inputLastName" type="text" name="inputLastName"
                              placeholder="Enter your last name" value="{{user.last_name}}">
                          </div>
                        </div>
                        <!-- Form Row        -->
                        <div class="row gx-3 mb-3">
                          <!-- Form Group (organization name)-->

                          <!-- Form  (State location)-->
                          <div class="col-md-6">
                            <label class="small mb-1" for="inputState">State</label>
                            <select id="inputState" name="inputState" value="{{profile.address.state}}">
                              <option value="AL">Alabama</option>
                              <option value="AK">Alaska</option>
                              <option value="AS">American Samoa</option>
                              <option value="AZ">Arizona</option>
                              <option value="AR">Arkansas</option>
                              <option value="UM-81">Baker Island</option>
                              <option value="CA">California</option>
                              <option value="CO">Colorado</option>
                              <option value="CT">Connecticut</option>
                              <option value="DE">Delaware</option>
                              <option value="DC">District of Columbia</option>
                              <option value="FL">Florida</option>
                              <option value="GA">Georgia</option>
                              <option value="GU">Guam</option>
                              <option value="HI">Hawaii</option>
                              <option value="UM-84">Howland Island</option>
                              <option value="ID">Idaho</option>
                              <option value="IL">Illinois</option>
                              <option value="IN">Indiana</option>
                              <option value="IA">Iowa</option>
                              <option value="UM-86">Jarvis Island</option>
                              <option value="UM-67">Johnston Atoll</option>
                              <option value="KS">Kansas</option>
                              <option value="KY">Kentucky</option>
                              <option value="UM-89">Kingman Reef</option>
                              <option value="LA">Louisiana</option>
                              <option value="ME">Maine</option>
                              <option value="MD">Maryland</option>
                              <option value="MA">Massachusetts</option>
                              <option value="MI">Michigan</option>
                              <option value="UM-71">Midway Atoll</option>
                              <option value="MN">Minnesota</option>
                              <option value="MS">Mississippi</option>
                              <option value="MO">Missouri</option>
                              <option value="MT">Montana</option>
                              <option value="UM-76">Navassa Island</option>
                              <option value="NE">Nebraska</option>
                              <option value="NV">Nevada</option>
                              <option value="NH">New Hampshire</option>
                              <option value="NJ">New Jersey</option>
                              <option value="NM">New Mexico</option>
                              <option value="NY">New York</option>
                              <option value="NC">North Carolina</option>
                              <option value="ND">North Dakota</option>
                              <option value="MP">Northern Mariana Islands</option>
                              <option value="OH">Ohio</option>
                              <option value="OK">Oklahoma</option>
                              <option value="OR">Oregon</option>
                              <option value="UM-95">Palmyra Atoll</option>
                              <option value="PA">Pennsylvania</option>
                              <option value="PR">Puerto Rico</option>
                              <option value="RI">Rhode Island</option>
                              <option value="SC">South Carolina</option>
                              <option value="SD">South Dakota</option>
                              <option value="TN">Tennessee</option>
                              <option value="TX">Texas</option>
                              <option value="UM">United States Minor Outlying Islands</option>
                              <option value="VI">United States Virgin Islands</option>
                              <option value="UT">Utah</option>
                              <option value="VT">Vermont</option>
                              <option value="VA">Virginia</option>
                              <option value="UM-79">Wake Island</option>
                              <option value="WA">Washington</option>
                              <option value="WV">West Virginia</option>
                              <option value="WI">Wisconsin</option>
                              <option value="WY">Wyoming</option>
                            </select>
                          </div>
                          <!-- Form  (City location)-->
                          <div class="col-md-10">
                            <label class="small mb-1" for="inputCity">City</label>
                            <input class="form-control" id="inputCity" type="text" name="inputCity"
                              placeholder="e.g. 'San Francisco'" value="{{profile.address.city}}">
                          </div>
                          <!-- Form  (Zipcode location)-->
                          <div class="col-md-8">
                            <label class="small mb-1" for="inputZipCode">Zip Code</label>
                            <input class="form-control" id="inputZipCode" type="text" name="inputZipCode"
                              placeholder="e.g. '95001'" value="{{profile.address.zipcode}}">
                          </div>
                          <!-- Form  (Country location)-->
                          <div class="col-md-10">
                            <label class="small mb-1" for="inputCountry">Country</label>
                            <input class="form-control" id="inputCountry" type="text" name="inputCountry"
                              placeholder="e.g. 'United States'" value="{{profile.address.country}}">
                          </div>
                        </div>
                        <!-- Form Group (email address)-->
                        <div class="mb-3">
                          <label class="small mb-1" for="inputEmail">Email address</label>
                          <input class="form-control" id="inputEmail" type="email" name="inputEmail"
                            placeholder="Enter your email address" value="{{user.email}}">
                        </div>
                        <!-- Form Row-->
                        <!-- <div class="row gx-3 mb-3"> -->
                        <!-- Form Group (phone number)-->
                        <!-- <div class="col-md-6">
                            <label class="small mb-1" for="inputPhone">Phone number</label>
                            <input class="form-control" id="inputPhone" type="tel" placeholder="Enter your phone number"
                              value="555-123-4567">
                          </div>

                        </div> -->
                        <!-- Save changes button-->
                        <button class="btn btn-primary" type="submit">Save changes</button>
                      </form>
                    </div>
                  </div>

                  <!-- Dependents card-->
                  <div class="card mb-4">
                    <div class="card-header">Dependents</div>
                    <div class="card-body" id="dpdtContainer">

                      <!-- Dependent A -->
                      <div class="card mb-3" id="dep1Body">
                        <div class="card-header d-flex flex-row justify-content-between">
                          <div>Dependent 1</div>
                          <button class="btn btn-secondary ml-auto mr-3">&times;</button>
                        </div>
                        <div class="card-body">
                          <div class="col-md-10">
                            <label class="small mb-1" for="dep1_name">Name</label>
                            <input class="form-control" id="dep1_name" type="text" name="depA_name"
                              placeholder="Enter your dependents name" value="{{dependent.0.name}}">
                          </div>
                          <div class="col-md-10">
                            <label class="small mb-1" for="dep1_dob">Date of Birth</label>
                            <input class="form-control" id="dep1_dob" type="date" name="dep1_dob"
                              placeholder="MM/DD/YYYY" value="{{dependent.0.dob}}">
                          </div>
                          <div class="col-md-10">
                            <label class="small mb-1" for="dep1_interests">Interests</label>
                            <input class="form-control" id="dep1_interests" type="text" name="dep1_interests"
                              placeholder="Enter your dependents interests" value="{{dependent.0.interests}}">
                          </div>
                          <div class="col-md-10 mt-3 mr-0 ml-auto">
                            <button class="btn btn-primary">Save</button>
                          </div>
                        </div>
                      </div>
                      <!-- END: Dependent A -->

                      <!-- Dependent Footer -->
                      <div class="row-md-12 d-flex flex-row-reverse justify-content-between">
                        <div class="">
                          <button class="btn btn-secondary">Add Dependent</button>
                        </div>
                        <div class="ml-0 mr-auto" id="depCount">
                          Dependents: 1
                        </div>
                      </div>
                      <!-- END: Dependent Footer -->

                    </div>
                  </div>
                  <!-- END: Dependents Card -->
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>
    </div>
  </div>
  {% include "notificationModal.html" %}
  {% include "footer.html" %}
</body>

</html>